---
описание: Автоматизированное проектирование в FormIt
---

# FormIt и Dynamo

![](<../.gitbook/assets/20181213 formit + dynamo hero image.png>)

В FormIt для ОС Windows встроена программа Dynamo, обеспечивающая невероятно мощные рабочие процессы автоматизированного проектирования.

## Новые возможности FormIt и Dynamo

### **Графики данных, отправка уровней в Excel и управление фасетизацией**

[FormIt 2023](https://formit.autodesk.com/blog/post/introducing-formit-2023/) позволяет запускать графики Dynamo [без узла SendToFormIt](formit-+-dynamo.md#graph-types) и обеспечивает возможность [отправлять уровни FormIt в Excel](formit-+-dynamo.md#send-formit-levels-to-excel), а также управлять [фасетизацией кривых и поверхностей с помощью новых узлов FormItGroupOptions](../tool-library/curve-+-surface-faceting.md).

### **Размеры как входные данные и ранний доступ к API JS**

[FormIt 2022.1](https://formit.autodesk.com/blog/post/introducing-formit-2022-1) позволяет использовать [знакомые размеры FormIt в качестве входных данных](https://formit.autodesk.com/page/formit-dynamo#dynamo-input-nodes), включает в себя [параметры уровня объекта](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-options-nodes) и обеспечивает ранний доступ к предварительной версии [API JavaScript](https://formit.autodesk.com/page/formit-dynamo#dynamo-js-api-nodes). Его можно скачать [здесь](https://formit.autodesk.com/page/download).

### **Несколько узлов SendToFormIt**

[FormIt 2021.3](https://formit.autodesk.com/blog/post/introducing-formit-2021-3) позволяет использовать [несколько узлов SendToFormIt и вложенные графики Dynamo](https://formit.autodesk.com/page/formit-dynamo#dynamo-groups).

### **Узел SelectFromFormIt**

[FormIt 2021](https://formit.autodesk.com/blog/post/introducing-formit-2021) включает в себя узел [SelectFromFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes), а также поддерживает сеансы с постоянным подключением, редактирование нескольких экземпляров и другие возможности.

## Начало работы

Узнайте больше об интерфейсе и свяжите каталоги Dynamo с FormIt.

### **Настройка при первом запуске**

Если вы впервые используете FormIt с Dynamo, сначала может потребоваться [настроить систему](https://formit.autodesk.com/page/formit-dynamo#dynamo-important-notes), чтобы отобразить рабочую область 3D в Dynamo.

### **Панель Dynamo**

Используйте панель Dynamo для запуска Dynamo, размещения групп Dynamo и редактирования графиков Dynamo.

![Панель Dynamo](<../.gitbook/assets/dynamo_dynamopanel (1).png>)

### **Добавление локальных каталогов Dynamo и управление ими**

* Панель Dynamo работает по тому же принципу, что и [библиотека компонентов](https://windows.help.formit.autodesk.com/building-the-farnsworth-house/import-export-and-content-library), что позволяет привязывать локальные каталоги, содержащие файлы Dynamo, и управлять ими.
* Нажмите кнопку «Привязать каталог» на панели Dynamo, а затем снова щелкните (+) в диалоговом окне «Настройки», чтобы выбрать каталог для привязывания к FormIt. <img src="../.gitbook/assets/dynamo_selectdirectory.png" alt="" data-size="line">
* Переключаться между привязанными каталогами можно с помощью раскрывающегося списка.

![](../.gitbook/assets/dynamo\_dropdown.png)

* Панель Dynamo поддерживает только просмотр файлов DYN и вложенных папок.
* Используйте панель фильтров, чтобы отфильтровать файлы и вложенные папки Dynamo и легко найти нужные элементы.

![](../.gitbook/assets/dynamo\_filter.png)

## Разные способы работы с Dynamo

Можно создавать и редактировать графики в Dynamo либо настраивать параметры в FormIt, даже не открывая график. А можно делать и то и другое.

### **Типы графиков**

FormIt поддерживает три типа графиков Dynamo.

* График данных. Эти графики не имеют узлов _SendToFormIt_ и используются для получения или передачи данных через FormIt. Например, графики данных можно использовать для отправки данных в Excel или для вычисления негеометрических данных и их отображения в узле Watch.
* График геометрии. Эти графики позволяют мгновенно создавать геометрию, и их требуется размещать в рабочей области для просмотра их параметров. При выборе миниатюры щелчком мыши на конце указателя отобразится геометрия, которую можно вставить в 3D-сцену. Для этого графика требуется по крайней мере один узел _SendToFormIt_, который будет получать геометрию в конце выполнения графика.
* График выбора. Перед запуском этих графиков необходимо сделать выбор в FormIt. В верхнем левом углу FormIt появится запрос, указывающий, что именно требуется выбрать. После выбора нужных элементов график запускается и создает геометрию, соответствующую выбранным элементам. Для этого графика требуется по крайней мере один узел _SendToFormIt_, который будет получать геометрию в конце выполнения графика.

![](../.gitbook/assets/dynamo-graph-types.png)

### **График геометрии. Размещение группы Dynamo в FormIt**

![](../.gitbook/assets/dynamo\_stairsgif.gif)

* На панели Dynamo щелкните миниатюру графика Dynamo, который требуется запустить.
  * Можно использовать встроенные образцы или [привязать библиотеку](https://formit.autodesk.com/page/formit-dynamo#dynamo-getting-started) пользовательских файлов Dynamo.
* При размещении геометрии в FormIt копия графика Dynamo встраивается в файл FormIt.
  * Для создания геометрии необходимо присоединить узел [SendToFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes) к узлам геометрии вывода на графике.
* Геометрия из узла SendToFormIt появится на конце указателя и будет доступна для размещения.
  * Если узлы [SelectFromFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes) графика помечены как «Является вводом», в FormIt сначала появляется запрос на выбор элементов (каждый узел выбора по вертикали), а затем создается геометрия в нужном месте в соответствии с выбранными элементами.
* Теперь в группу FormIt встроена копия исходного файла Dynamo, которая не зависит от исходного графика.
* После размещения панель «Свойства» автоматически переключается, и на ней отображаются доступные параметры.

### **График геометрии. Изменение параметров**

![](../.gitbook/assets/dynamo\_stairsgif2\_modifyparameters.gif)

* Разместив группу Dynamo, выберите ее и переключитесь на панель «Свойства» или просто дважды щелкните группу, чтобы автоматически переключиться на свойства.
  * Здесь будут перечислены все узлы ввода, помеченные в Dynamo как «Является вводом».
  * Узлы ввода [**SelectFromFormIt**](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes) отобразятся вверху в виде кнопок, которые можно использовать для обновления набора выбранных элементов, управляющих графиком.
  * FormIt поддерживает следующие узлы ввода: регуляторы чисел, регуляторы целых чисел, переключатели логических значений, числовые либо строковые поля.
* Внесите изменения во входные данные в FormIt, затем нажмите кнопку «Выполнить». Кнопка «Выполнить» станет синей, указывая на то, что параметры были изменены и требуется запустить график.
  * Dynamo запустится в фоновом режиме для обработки изменений и возврата обновленной геометрии в FormIt.
  * В FormIt 2022 или более поздней версии при первом запуске с панели свойств запускается выделенный экземпляр Dynamo, что значительно ускоряет дальнейшее редактирование.
  * Во время работы Dynamo можно продолжать пользоваться FormIt. 
* Обратите внимание, что при запуске графика Dynamo вся геометрия внутри каждой группы SendToFormIt удаляется и заменяется.

### График данных. Отправка уровней FormIt в Excel

В FormIt 2023 или более поздней версии можно использовать Dynamo для отправки уровней FormIt в Excel. 

* Скачайте [образец графика Dynamo здесь](https://formit-help.s3.amazonaws.com/Send+Levels+to+Excel.dyn).
* Укажите на палитре Dynamo локальный каталог, куда был сохранен график Dynamo.
* Щелкните миниатюру правой кнопкой мыши и выберите _Редактировать встроенный график_.
* Создайте пустую электронную таблицу Excel в любой папке.
* Отредактируйте поле с расположением электронной таблицы, используя путь к данной таблице Excel.
* По желанию отредактируйте другие поля, например поле имени листа.
* Закройте Dynamo и сохраните график.

Теперь можно просто щелкнуть файл образца на палитре, и он запустится в FormIt без необходимости в создании геометрии. 

Входные данные Dynamo появятся на палитре Dynamo, а результаты графика отобразятся в открывшемся приложении Excel. 

При внесении изменений в модель можно снова щелкнуть миниатюру графика или нажать кнопку _Выполнить_, чтобы обновить электронную таблицу с использованием данных об уровнях из последней версии эскиза FormIt.

![](../.gitbook/assets/dynamo-send-levels-to-excel.gif)

### Запуск нового окна Dynamo

![](../.gitbook/assets/dynamo\_launchwindow.gif)

* В FormIt 2021 или более поздней версии при нажатии кнопки «Запустить Dynamo» на панели Dynamo автоматически запускается связанный сеанс FormIt.
  * При этом в Dynamo открывается шаблон графика, а в FormIt автоматически создается геометрия шаблона.
  * Полученная геометрия отображается в новой группе в начале контекста редактирования текущей группы. Рекомендуется перейти в контекст нужной группы перед запуском Dynamo. 
  * Шаблон содержит как узлы FormIt, так и некоторые образцы геометрии. При использовании регуляторов размеры куба изменятся в обоих приложениях.
  * Здесь можно открыть различные графики Dynamo или создать что-то новое с помощью этих базовых компонентов в шаблоне, а затем сохранить результаты в новой папке с помощью функции «Сохранить как» в Dynamo.

### **Редактирование встроенных и исходных графиков**

Существующие графики Dynamo можно редактировать двумя способами: путем изменения встроенных графиков, которые уже размещены в FormIt, или путем изменения исходного графика, сохраненного на компьютере.

### **Встроенные графики**

Когда объект Dynamo размещается в FormIt, его базовый график копируется и встраивается в текущий файл FormIt. Для редактирования такого графика в Dynamo используется кнопка **Редактировать встроенный график**.

![](../.gitbook/assets/dynamo\_embeddedgraph.png)

![](../.gitbook/assets/dynamo\_editgraphgif.gif)

* Выберите группу Dynamo и переключитесь на панель «Свойства» или просто дважды щелкните группу, чтобы автоматически переключиться на свойства.
* Нажмите кнопку **Редактировать встроенный график**.
* Обратите внимание, что к имени файла в верхней части окна Dynamo добавлена надпись «(FormIt)». Это означает, что редактируется график, встроенный в этот файл FormIt, а исходный график не изменяется.
* Убедитесь, что один или несколько узлов [SendToFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes) привязаны к геометрии, которую требуется отправить в FormIt.
* При корректировке графика обновления геометрии отображаются в FormIt в реальном времени.
* Если не сохранить изменения в Dynamo, FormIt выполнит откат к последней сохраненной версии графика Dynamo.
* Обратите внимание, что при запуске графика Dynamo вся геометрия внутри каждой группы SendToFormIt удаляется и заменяется.

### **Исходные графики**

Исходные графики отображаются на панели Dynamo после [привязывания локальных каталогов](https://formit.autodesk.com/page/formit-dynamo#dynamo-getting-started). Эти графики хранятся на компьютере. Чтобы отредактировать их в Dynamo, следует нажать кнопку «Редактировать исходный график».

![](../.gitbook/assets/dynamo\_editsourcegraph.png)

![](../.gitbook/assets/dynamo\_sourcegraphgif.gif)

* [Привяжите каталог](https://formit.autodesk.com/page/formit-dynamo#dynamo-getting-started), содержащий файлы Dynamo, к панели Dynamo, а затем перейдите к соответствующему расположению с помощью этой панели. 
* Щелкните миниатюру графика Dynamo, который требуется изменить, правой кнопкой мыши (или щелкните стрелку) и выберите **Редактировать исходный график**.
* Соответствующий график открывается в Dynamo, а в FormIt отображается геометрия на основе итоговых выходных данных графика.
  * В случае с графиками, где в качестве входных данных используется один или несколько узлов [SelectFromFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes), итоговая геометрия может не отображаться до тех пор, пока узлы SelectFromFormIt не будут заполнены выбранными элементами.
* Полученная геометрия отображается в новой группе в начале контекста редактирования текущей группы.
  * Рекомендуется перейти в контекст нужной группы, прежде чем нажимать кнопку «Редактировать исходный график».
* Закончив редактирование, сохраните результаты работы и закройте Dynamo. В FormIt исходный график копируется и встраивается в файл FormIt.
  * Если в **исходный график** требуется внести дополнительные изменения, удалите встроенную копию и снова выполните эти шаги.

### **Управление фасетизацией кривых и поверхностей**

*   Начиная с версии FormIt 2023, фасетизацией кривых и поверхностей, присоединенных к узлам SendToFormIt, можно управлять с помощью узлов FormItGroupOptions (SetCurveFacetingCount и SetSurfaceFacetingCount).

    <img src="../.gitbook/assets/dynamo-formitgroupoptions-faceting-nodes.png" alt="" data-size="original">
* Эти узлы переопределяют глобальные параметры фасетизации кривых и поверхностей, заданные в разделе «Правка» > «Настройки» > «Единицы и точность».
* Это очень удобно, когда в графике Dynamo требуется создать криволинейные объекты с определенными значениями фасетизации, поскольку эта возможность позволяет не менять глобальную настройку для каждого графика Dynamo, запускаемого в текущем сеансе.

![](../.gitbook/assets/dynamo-formitgroupoptions-faceting.gif)

* Кроме того, можно задать глобальные параметры фасетизации в разделе «Правка» > «Настройки» > «Единицы и точность».
* Отрегулировав качество фасетизации в настройках, запустите график повторно для использования в нем новых глобальных параметров фасетизации.

![](../.gitbook/assets/dynamo\_controlcurve.gif)

[Подробнее о параметрах фасетизации кривых и поверхностей в FormIt.](https://windows.help.formit.autodesk.com/tool-library/curve-+-surface-faceting)

## Использование групп FormIt и Dynamo

Мощные возможности групп FormIt помогают обеспечить эффективную организацию геометрии Dynamo и открывают доступ к потрясающим рабочим процессам.

### **Группы и узел SelectFromFormIt**

* Если требуется выбрать геометрию для узла [SelectFromFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes), рекомендуется сохранить ее в группе FormIt и выбрать эту группу вместо геометрии.
  * Благодаря этому вы сможете изменять содержимое выбранной группы FormIt, а затем просто повторно запускать ссылающийся на нее график, чтобы увидеть обновленные результаты.
* Если же выбрать геометрию, не входящую в состав группы, то после изменения этой геометрии в FormIt может появиться запрос на повторный выбор этой геометрии при следующем запуске графика.

### **Создание геометрии в группах**

* При запуске графика Dynamo в FormIt его геометрические результаты размещаются внутри группы FormIt.
* Для каждого узла [SendToFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes) в графике создается подгруппа, содержащая геометрию из порта ввода соответствующего узла.
* После создания объекта Dynamo в FormIt весь график и его параметры встраиваются в формате копии в файл FormIt.
* При запуске графика геометрия внутри каждой подгруппы удаляется и создается заново.
  * При изменении геометрии или окрашивании поверхностей в подгруппах следует соблюдать осторожность, поскольку эти изменения будут утеряны при последующем запуске графика Dynamo.
  * Однако при окрашивании самих подгрупп (а не содержащейся в них геометрии) с помощью материалов FormIt эти материалы будут сохранены при последующим запусках. См. ниже.

### **Работа с группами и материалами**

* При использовании нескольких узлов **SendToFormIt** эти узлы можно организовать по материалу, что позволяет окрашивать разные подгруппы FormIt с помощью разных материалов.
* В этом примере из простых плоскостей в FormIt создается целое здание. Каждому компоненту здания, которому требуются уникальные материалы, назначается собственный узел **SendToFormIt**.

![](<../.gitbook/assets/dynamo_sendtoformit (1).png>)

* После применения материалов к каждой подгруппе эти материалы сохраняются при последующих запусках Dynamo.

![](../.gitbook/assets/dynamo\_materialsgif.gif)

### **Работа с вложенными группами Dynamo**

* С помощью узла **SelectFromFormIt** можно выбрать результаты подгруппы на одном графике Dynamo и использовать их для управления результатами в другом графике. 
* В рамках приведенного выше примера выходные данные остекления из графика, в котором создается здание, используются в качестве геометрии выбора для встроенного образца витрины/витража.

![](../.gitbook/assets/dynamo\_storefront\_curtainwallgif.gif)

* При изменении формы здания можно просто выбрать группу системы импостов, а затем нажать кнопку «Выполнить» на панели «Свойства».
  * Несмотря на то что содержимое группы остекления изменилось, сама группа осталась прежней, поэтому снова выбирать остекление при повторном запуске графика не требуется.
* Приведенная выше модель доступна в FormIt 2022 или более поздней версии как модель построения плоскостей крыши в подпапке **формообразующих элементов** каталога **примеров Dynamo**.
* В сочетании с широкими возможностями FormIt программа Dynamo позволяет создавать полностью параметрические и легко редактируемые проекты, дополненные материалами и вложенными логическими операциями, в насыщенном данными контексте мощного средства концептуального моделирования.

![](../.gitbook/assets/dynamo\_parametricdesigngif.gif)

### **Случаи, в которых по-прежнему применяется стандартное поведение групп FormIt**

* За исключением случаев, описанных выше, группы Dynamo в FormIt подчиняются тем же правилам, что и любые другие группы.
  * При размещении нового объекта Dynamo с помощью панели Dynamo создается уникальная группа. При этом экземпляры данного объекта, уже размещенные в эскизе, не затрагиваются.
  * При копировании и вставке групп Dynamo их идентичность сохраняется. Любые изменения, внесенные в график Dynamo одной из копий, приводят к обновлению геометрии в идентичных ей экземплярах, если только эти экземпляры не являются уникальными.
  * Группы Dynamo можно сделать уникальными с помощью команды быстрого вызова MU или через контекстное меню.

![](<../.gitbook/assets/dynamo_makeunique (1).png>)

## Ключевые узлы FormIt

Самые мощные узлы для передачи данных между FormIt и Dynamo.

### **Узел SendToFormIt**

* Для создания объектов Dynamo в FormIt присоедините требуемые выходные данные геометрического узла к входному параметру _geometry_ хотя бы одного узла SendToFormIt.

![](<../.gitbook/assets/dynamo_sendtoformitnode (1).png>)

* FormItGroupOptions — новый (дополнительный) порт, доступный в FormIt 2022\. Подробные сведения о нем см. в разделе **Узлы FormItGroupOptions** ниже.
* В FormIt 2021.3 или более поздней версии можно использовать несколько узлов SendToFormIt для объединения результатов из Dynamo в аккуратные группы и подгруппы FormIt.
* [Подробнее об использовании групп FormIt в Dynamo](https://formit.autodesk.com/page/formit-dynamo#dynamo-groups).

![](<../.gitbook/assets/dynamo_sendtoformitnodes (1).png>)

* Узел SendToFormIt учитывает флаг «Является выводом», который устанавливается по умолчанию. Щелкните узел правой кнопкой мыши, чтобы проверить это.

![](<../.gitbook/assets/dynamo_isoutput (1).png>)

* Если этот флаг установлен, геометрия, присоединенная к этому узлу SendToFormIt, появится в FormIt внутри подгруппы.
* Если этот флаг снят, геометрия не отправляется в FormIt, а соответствующая подгруппа (при ее наличии) удаляется.

### **Узел SelectFromFormIt**

* В FormIt 2021 или более поздней версии геометрию из FormIt можно выбрать для использования в качестве входных данных в графиках Dynamo.

![](<../.gitbook/assets/dynamo_selectfromformitnode (1).png>)

* Имя узла SelectFromFormIt будет использоваться для запросов в FormIt, поэтому следует присвоить ему имя, описывающее тип геометрии FormIt, который необходимо выбрать.

![](<../.gitbook/assets/dynamo_selectobjectstoarraynode (1).png>)

* При нажатии кнопки «Выбрать из FormIt» в редакторе графиков Dynamo или на панели «Свойства» в FormIt запускается режим мастера выбора, помогающий выбрать геометрию.

![](../.gitbook/assets/dynamo\_selectobjectstoarrayUI.png)

* Узел SelectFromFormIt учитывает флаг «Является вводом», который устанавливается по умолчанию. Он должен быть установлен для выполнения выбора в FormIt. Щелкните узел правой кнопкой мыши, чтобы проверить это.

![](<../.gitbook/assets/dynamo_isinput (1).png>)

* Если флаг «Является вводом» установлен:
  * Миниатюра графика на панели Dynamo укажет на необходимость выбора.

![](../.gitbook/assets/dynamo\_patharray.png)

* При запуске графика мастер выбора FormIt отображает подсказки по выбору настроек для каждого узла SelectFromFormIt, начиная с верхней части графика.
* После первого генерирования на панели «Свойства» в FormIt появится кнопка для каждого узла SelectFromFormIt.

![](../.gitbook/assets/dynamo\_selectarraypath.png)

* При нажатии на них запускается мастер выбора, который позволяет изменять выбранные элементы, используемые для создания итоговой геометрии. После повторного выбора график автоматически перезапускается.

### **Советы, рекомендации и примечания**

* Присвойте узлу SelectFromFormIt имя, указывающее на ожидаемый тип геометрии. Например, «Выбрать границу площадки (ребра)».
  * Можно выбрать любой тип геометрии FormIt, но обычно рекомендуется поместить выбираемые элементы в группу FormIt и [выбрать группу вместо самой геометрии](https://formit.autodesk.com/page/formit-dynamo#dynamo-groups).
* Если требуется переместить результаты графика Dynamo, сгенерированного на основе выбора, рекомендуется сначала переместить геометрию выбора, а затем повторно запустить график. При этом в графике будет использоваться обновленная геометрия выбора, и расположение графика изменится соответствующим образом. 
  * Кроме того, можно поместить в группу результаты из Dynamo **вместе** с выбранными элементами, а затем переместить эту группу.
* Если геометрия FormIt отправляется в Dynamo, то все атрибуты, материалы или вложенные группы будут утеряны при возврате геометрии обратно в FormIt.
* Если при редактировании в Dynamo графика на основе выбора происходит изменение выбранной геометрии в FormIt, потребуется повторно выбрать геометрию, нажав кнопку «Выбрать из FormIt» в узле SelectFromFormIt. 
* При выборе в FormIt применяется активный [фильтр выбора](https://windows.help.formit.autodesk.com/tool-library/select-edge-face-or-object#selection-filtering). Например, если требуется выбрать вершины FormIt, необходимо включить соответствующий параметр в фильтре выбора.

![](../.gitbook/assets/dynamo\_filterselection.png)

## Другие узлы ввода

Широкий набор параметров ввода для удобной адаптации графиков Dynamo в FormIt.

### **Узел FormItLengthString**

В FormIt 2022.1.0 или более поздней версии можно использовать узел **FormItLengthString** для задания размеров в любых поддерживаемых типах единиц FormIt (футы и дюймы, дюймы, метры, сантиметры, миллиметры) независимо от настроек единиц FormIt в активном эскизе.

![](../.gitbook/assets/dynamo\_formitlengthstring.png)

Как и другие поддерживаемые узлы ввода, _FormItLengthString_ отображается на палитре «Свойства» в FormIt, если для него установлен флаг «Является вводом», а при его переименовании его новое имя появляется в FormIt.

![](../.gitbook/assets/dynamo\_propertiespalette.png)

В каждом экземпляре узла _FormItLengthString_ можно использовать любой тип единиц, поэтому в одном графике Dynamo могут использоваться разные единицы, как показано выше.

### **Переключение с исходных чисел на FormItLengthString**

В FormIt 2022.1.1 или более поздней версии переключение графика на использование узлов FormItLengthString (путем размещения первого такого узла на графике) или на использование только исходных чисел (путем удаления последнего узла FormItLengthString) приводит к определенным изменениям в работе при редактировании графика в Dynamo.

* Если при редактировании графика используется узел [SelectFromFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes), то для переключения между использованием исходных чисел и использованием узла _FormItLengthString_, как показано выше, для корректного масштабирования результатов в FormIt потребуется заново выбрать геометрию для каждого узла _SelectFromFormItNode_.
* После размещения первого узла FormItLengthString на графике все числа графика, используемые как размеры (включая входные данные исходных чисел), будут отнесены к метрам (исходные единицы Dynamo).
  * Узел [SendToFormIt](https://formit.autodesk.com/page/formit-dynamo#dynamo-formit-nodes) учитывает данное изменение и обеспечивает сохранение правильного размера сгенерированной геометрии в FormIt.
  * И наоборот, удаление всех узлов FormItLengthString из графика приведет к переключению исходных чисел на заданные параметры единиц FormIt (прежнее поведение).
* Числовой вывод узлов _FormItLengthString_ также представляется в метрах, однако это не приводит к изменению размера геометрических результатов в FormIt.

![](<../.gitbook/assets/dynamo_outputinmeters (1).png>)

### **Другие поддерживаемые узлы ввода**

Стандартные узлы ввода Dynamo отображаются на панели «Свойства» в FormIt, если они помечены флагом «Является вводом» в Dynamo.

* Number Slider
* Integer Slider
* Number
* String
* Boolean Toggle

Узлы ввода можно переименовать (рекомендуется сделать это для ясности), и их новые имена появятся в FormIt.

![](<../.gitbook/assets/dynamo_cuboidsize (1).png>)

![](../.gitbook/assets/dynamo\_inputs.png)

## Другие узлы вывода

Различные методы отображения негеометрических результатов, полученных из Dynamo, в FormIt.

### **Узел Watch**

Узлы Watch, для которых установлен флаг «Является выводом», отображаются в разделе «Выходные данные узла просмотра» панели «Свойства» в FormIt 2022 или более поздней версии.

![](<../.gitbook/assets/dynamo_watchnodes (1).png>)

### **Отображение уведомлений FormIt**

В FormIt 2022.1 или более поздней версии можно отображать уведомления из FormIt для графика Dynamo с помощью узла **UI.ShowNotification**. 

![](../.gitbook/assets/dynamo\_notifications.png)

### **Ввод данных в консоль FormIt**

В FormIt 2022.1 или более поздней версии можно вводить дополнительные данные непосредственно в консоль приложения FormIt (окно вывода сценария) с помощью узла **FormIt.ConsoleLog**.

![](../.gitbook/assets/dynamo\_logtoconsole.png)

## Узлы параметров FormIt

Передачей данных в FormIt можно управлять на уровне отдельной геометрии или на уровне содержащей геометрию группы.

### **FormItGeometryOptions**

В FormIt 2022.1 или более поздней версии предусмотрена возможность адаптации процесса отправки отдельных элементов геометрии Dynamo в FormIt с помощью узлов **FormItGeometryOptions**.

* Укажите слой для отдельных элементов геометрии в созданной группе Dynamo.
* Укажите строковый атрибут для отдельных элементов геометрии в созданной группе Dynamo.

Узлы _FormItGeometryOptions_ можно использовать на участках, следующих за узлом _SendToFormIt_.

![](<../.gitbook/assets/dynamo_formitgeometryoptions (1).png>)

### **FormItGroupOptions**

В FormIt 2022 или более поздней версии предусмотрена возможность адаптации процесса создания группы Dynamo из узла _SendToFormIt_ в FormIt с помощью узлов **FormItGroupOptions**.

* Укажите, как узел SendToFormIt отправляет геометрию в FormIt: как сеть или объект.
* Укажите слой для группы, созданной с помощью узла SendToFormIt.
* Укажите строковый атрибут для группы, созданной с помощью узла SendToFormIt.

Узлы FormItGroupOptions можно использовать в любой комбинации и в любом порядке, составляя из них цепочки.

![](../.gitbook/assets/dynamo\_daisychain.png)

## Узлы API JavaScript

В FormIt 2022.1 или более поздней версии к API-интерфейсам и пользовательским функциям JavaScript можно получить доступ из Dynamo с помощью двух новых узлов.

### **CallJSAPI**

Узел **CallJSAPI** позволяет вызывать API-интерфейсы JavaScript, доступные в FormIt, непосредственно из Dynamo.

![](<../.gitbook/assets/dynamo_calljsapi (1).png>)

Информацию об именах функций и параметрах можно найти в документации по JavaScript, которая разделена на две части: [FormIt API](https://formit3d.github.io/FormItExamplePlugins/docs/FormItJSAPI/group\_\_mod\_\_jsapi\_\_formit.html) и [WSM API](https://formit3d.github.io/FormItExamplePlugins/docs/FormItJSAPI/group\_\_mod\_\_jsapi\_\_wsm.html) (ядро моделирования).

**CallPluginJS**

В свою очередь, узел **CallPluginJS** позволяет вызывать пользовательские функции из загруженного подключаемого модуля или фрагмента сценария, который был выполнен из окна редактора сценариев.

![](<../.gitbook/assets/dynamo_callpluginjs (1).png>)

## Важные примечания

### **Требования к системе**

* Для использования Dynamo в FormIt требуется [FormIt для ОС Windows](https://formit.autodesk.com/page/download) 17.0 или более поздней версии.
  * Интеграция FormIt и Dynamo регулярно дополняется новыми возможностями и исправлениями, поэтому рекомендуется всегда скачивать последние доступные обновления.
* Кроме того, потребуется ОС Windows 10. По техническим причинам более ранние версии ОС Windows не поддерживаются.

**Устранение неполадок**

* При наличии системы с [видеокартой NVIDIA или AMD](https://www.howtogeek.com/414201/how-to-check-what-graphics-card-gpu-is-in-your-pc/) либо несколькими видеокартами может быть необходимо настроить использование высокомощного графического процессора в FormIt и Dynamo.
  * _C:/Program Files/Autodesk/FormIt/FormIt.exe_
  * _C:/Program Files/Autodesk/FormIt/DynamoSandbox/FormItDynamoSandbox.exe_
  * При наличии видеокарты NVIDIA [убедитесь, что на компьютере установлена панель управления NVIDIA](https://whatsabyte.com/blog/find-nvidia-control-panel/).
  * Используйте панели управления [NVIDIA](https://nvidia.custhelp.com/app/answers/detail/a\_id/2615/\~/how-do-i-customize-optimus-profiles-and-settings%3F) или [AMD](https://www.amd.com/en/support/kb/faq/dh-017), чтобы настроить использование дискретной видеокарты в следующих приложениях.
* При использовании локализованной версии может потребоваться задать для параметров региона ОС Windows 10 значение «Английский», чтобы избежать проблем с некоторыми узлами Dynamo.
  * В меню «Пуск» введите поисковый запрос «язык» и выберите «Языковые параметры».
  * В верхнем правом углу диалогового окна «Язык» выберите «Административные языковые параметры».
  * Нажмите кнопку «Изменить язык системы...».
  * Выберите «Английский (США)».
* Если при работе с небольшими геометрическими элементами или числами не удается получить результаты графиков в FormIt, попробуйте изменить настройку масштабирования Dynamo на «Маленький».
  * Меню Dynamo > «Настройки» > «Общие» > «Масштабирование геометрии» > «Маленький»

![](../.gitbook/assets/dynamo\_geometryscaling.png)

### **Получение поддержки**

Требуется помощь в работе с FormIt и Dynamo? [Напишите нам на форумах](https://forums.autodesk.com/t5/formit-forum/bd-p/142).
